package distributed.demo;

import clojure.java.api.Clojure;
import clojure.lang.IFn;
import clojure.lang.LazySeq;
import clojure.lang.Symbol;
import distributed.ClojureKt;
import distributed.GlobalKt;

import java.util.List;

public class Demo {

    static {
        ClojureKt.getRequireFn().invoke(Symbol.intern("me.juhezi.core"));
    }

    private static final String dataString = "[[450101.0, 1.3100116E7, 0.3122711665681055], [1.3622895E7, 2.1644831E7, 0.6642738677640162], [8729492.0, 1.8460406E7, 0.2066300841181281], [3.0587244E7, 1.5863764E7, 0.2694432066643214], [1.1433319E7, 6195391.0, 0.8536013743343571], [158790.0, 2.1359542E7, 0.17813353018267092], [7237124.0, 2.6822688E7, 0.37534352217431416], [8697522.0, 2.3441098E7, 0.11803472681846605], [1992613.0, 3.0430986E7, 0.6206185351525766], [1.34207E7, 2.315416E7, 0.8360275410755098], [1.8249042E7, 1.450834E7, 0.7317082657186449], [3.3069079E7, 2.0744129E7, 0.616577161034026], [3184349.0, 1.672052E7, 0.8477111217273023], [1.7736812E7, 4362375.0, 0.06102161974849474], [2.0052997E7, 342439.0, 0.5216761828863455], [2.6257998E7, 1.0216535E7, 0.94655150455577], [1.383903E7, 8807061.0, 0.7549515588419783], [6573356.0, 2.8894023E7, 0.19745576591044978], [3.2787561E7, 2.8966276E7, 0.5931149859822903], [1.1483547E7, 5528523.0, 0.054911787587130834], [2.4077993E7, 2.1382583E7, 0.0756282179018099], [1.5779056E7, 9545515.0, 0.9747763450132576], [1.5647406E7, 2.7073681E7, 0.8101841077863523], [6262251.0, 687134.0, 0.5740711619257415], [3295268.0, 2.266233E7, 0.0756837788918096], [2.2946441E7, 8461184.0, 0.8288254801004551], [2.1171976E7, 8038762.0, 0.6977477831008616], [2.8716792E7, 6028079.0, 0.6610183716873375], [2.0507819E7, 2.1622227E7, 0.5656626954967877], [3553700.0, 1086210.0, 0.21965281841474482], [6963152.0, 5357735.0, 0.22494459593352095], [2.1655659E7, 2.0148192E7, 0.9823956762928352], [2277363.0, 1.3615042E7, 0.8582902054888359], [2.0286187E7, 1.7051902E7, 0.09729340763102756], [2.2188964E7, 2.9685748E7, 0.7443500323825927], [1.1224566E7, 1.6552754E7, 0.011356011374132002], [1.7527307E7, 1.6231659E7, 0.9092131682984015], [2.899869E7, 2764402.0, 0.8257414436283559], [1.8224006E7, 1.7093945E7, 0.5060934973614938], [2.0012922E7, 3.2180584E7, 0.920429858789939], [7255408.0, 3.3009279E7, 0.8759781697751827], [3.2692301E7, 370476.0, 0.8068801825580211], [1.7560828E7, 1.2996022E7, 0.3071849165391278], [1084707.0, 1.7150754E7, 0.7772686670171931], [3.3015097E7, 2.5857942E7, 0.7480747461704196], [1.5308746E7, 4648684.0, 0.8267793995732926], [7783473.0, 5721377.0, 0.9272511730939791], [682890.0, 1.9433094E7, 0.8521920616737775], [1.249771E7, 1.9019854E7, 0.18613562845671017], [1503349.0, 8613504.0, 0.8563554243914484]]";

    public static void main(String[] args) {
        IFn fn = Clojure.var("me.juhezi.core", "select");
        List<List> data = GlobalKt.getGson().fromJson(dataString, List.class);

//        System.out.println(data);
        for (int i = 0; i < 20; i++) {
            System.out.println(fn.invoke(data));
        }
    }

}
/*
cross OK
mutate OK
select OK
 */